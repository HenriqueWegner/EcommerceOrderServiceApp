spring:
  application:
    name: EcommerceOrderServiceApi
  output:
    ansi:
      enabled: ALWAYS
  datasource:
    url: ${DATASOURCE_URL:jdbc:postgresql://localhost:5435/ecommerce}
    username: ${DATSOURCE_USERNAME:postgres}
    password: ${DATASOURCE_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver
  jpa:
    show_sql: true
    properties:
      hibernate:
        format_sql: true
  kafka:
    bootstrap-servers: localhost:9092
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
    consumer:
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer
      properties:
        spring.deserializer.value.delegate.class: org.springframework.kafka.support.serializer.JsonDeserializer
        spring.json.trusted.packages: "*"
    topic:
      order-event: order-events
      payment-event: payment-events
      payment-update: payment-updates
      payment-update-dlq: payment-updates-dlq
      shipping-update: shipping-updates
      shipping-update-dlq: shipping-updates-dlq
  security:
    oauth2:
      client:
        registration:
          customer-client:
            client-id: ${CUSTOMER_CLIENT_ID}
            client-secret: ${CUSTOMER_CLIENT_SECRET}
            authorization-grant-type: client_credentials
            provider: my-auth-server
          product-client:
            client-id: ${PRODUCT_CLIENT_ID}
            client-secret: ${PRODUCT_CLIENT_SECRET}
            authorization-grant-type: client_credentials
            provider: my-auth-server
        provider:
          my-auth-server:
            token-uri: ${TOKEN_URI}
        resourceserver:
          jwt:
            jwk-set-uri: ${JWT_URI}
security:
  roles:
    admin-access: ADMIN
    user-access: USER
    all-access: ADMIN,USER
api:
  url:
    via-cep: ${VIA_CEP_URL}
    shipping-quotation: ${SHIPPING_QUOTATION_URL}
    customers: ${CUSTOMERS_URL}
    products: ${PRODUCTS_URL}
logging:
  level:
    org.springframework.security: DEBUG
    org:
      springframework:
        web:
          reactive:
            function:
              client:
                ExchangeFunctions: DEBUG
        org:
          springframework:
            web:
              reactive:
                function:
                  client:
                    ExchangeFunctions=DEBUG:
#    root: ERROR
springdoc:
  override-with-generic-response: false