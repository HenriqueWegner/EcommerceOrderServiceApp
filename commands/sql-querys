create table customers (
    id uuid primary key,
    name varchar(255),
    email varchar(255),
    address varchar(255),
    phone_number varchar(50)
);

create table orders (
    id uuid primary key,
    created_at timestamp default now(),
    updated_at timestamp default now(),
    currency varchar(10),
    status varchar(50),
    customer_id uuid not null,
    cep varchar(20),
    street varchar(255),
    neighborhood varchar(255),
    city varchar(255),
    state varchar(100),
    uf varchar(2),
    number varchar(20),
    complement varchar(255),
    idempotency_key varchar(255),
    constraint fk_orders_customer foreign key (customer_id) references customers(id)
);

create table order_items (
    id uuid not null primary key,
    order_id uuid not null,
    sku varchar(100) not null,
    quantity numeric(4),
    unit_price numeric(18,2),
    constraint fk_orderitems_order foreign key (order_id) references orders(id)
);

create table payments (
    id uuid not null primary key,
    order_id uuid not null,
    card_token varchar(50) not null,
    payment_method varchar(50) not null,
    payment_status varchar(50) not null,
    amount numeric(18,2),
    constraint fk_payment_order foreign key (order_id) references orders(id)
);

create table shippings (
    id uuid not null primary key,
    price numeric(10,2) not null,
    estimated_delivery date not null,
    carrier varchar(50) not null,
    cep_origin varchar(9) not null,
    cep_destination varchar(9) not null,
    order_id uuid not null unique,
    constraint fk_shipping_order foreign key (order_id) references orders(id)
);

